<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
    <script
      src="https://unpkg.com/react@17/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/c91808f2e8.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div id="root">
      <!-- <form action="">
        <label for="text"> Username </label>
        <input  type="text" />
        <label for="text"> email </label>
        <input type="email" />
        <label for="text"> password </label>
        <input type="password" />
        <label for="text"> confirm password </label>
        <input type="password" />

        <input type="submit" value="submit" />
      </form> -->
    </div>
    <script type="text/babel">
      let root = document.querySelector('#root');
      class Faq extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            username: '',
            email: '',
            password: '',
            password2: '',
            error: {
              username: '',
              email: '',
              password: '',
            },
          };
        }

        handleSubmit = (event) => {
          event.preventDefault();
          alert(`hello ${this.state.initialText}`);
        };

        validateEmail = (email) => {
          const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
          return re.test(String(email).toLowerCase());
        };

        handleInput = ({ target }) => {
          let { name, value } = target;
          let element = this.state[name];

          let error = this.state.error;

          switch (name) {
            case 'email':
              error.email = this.validateEmail(value)
                ? ''
                : 'Email is not valid';
              break;
            case 'username':
              error.email = value.length >= 6 ? '' : 'username is not valid';
              break;
            case 'password':
              error.email =
                value.length >= 6 ? '' : 'password cannt be less than 6';
              break;
            case 'password2':
              error.email =
                this.state.password === value ? '' : 'password2 is not valid';
              break;
          }

          this.setState({ error, [name]: value });
        };
        render() {
          let { email, username, password, password2 } = this.state.error;
          return (
            <>
              <form action="">
                <label htmlFor="text"> Username </label>
                <input
                  type="text"
                  name="username"
                  value={this.state.username}
                  onChange={this.handleInput}
                  className={username && 'error'}
                />
                <span>{username}</span>
                <label htmlFor="text"> email </label>
                <input
                  type="email"
                  name="email"
                  value={this.state.email}
                  onChange={this.handleInput}
                  className={email && 'error'}
                />
                <span>{email}</span>
                <label htmlFor="text"> password </label>
                <input
                  type="password"
                  name="password"
                  value={this.state.password}
                  onChange={this.handleInput}
                  className={password && 'error'}
                />
                <span>{password}</span>
                <label htmlFor="text"> confirm password </label>
                <input
                  type="password"
                  name="password2"
                  value={this.state.password2}
                  onChange={this.handleInput}
                  className={password2 && 'error'}
                />
                <span>{password2}</span>
                <input type="submit" value="submit" />
              </form>
            </>
          );
        }
      }

      ReactDOM.render(<Faq />, root);
    </script>
  </body>
</html>
